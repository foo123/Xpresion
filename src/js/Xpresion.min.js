/**
*
*   Xpresion
*   Simple eXpression parser engine with variables and custom functions support for PHP, Python, Node/JS, ActionScript
*   @version: 0.6
*
*   https://github.com/foo123/Xpresion
*
**/
!function(t,n,e){"use strict";var r,i="object"==typeof module&&module.exports,l="function"==typeof define&&define.amd;i?module.exports=(module.$deps=module.$deps||{})[n]=module.$deps[n]||e.call(t,{NODE:module})||1:l&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["require","exports","module"],function(n,r,i){return e.call(t,{AMD:i})}):n in t||(t[n]=r=e.call(t,{})||1)&&l&&define(n,[],function(){return r})}(this,"Xpresion",function(t,n){"use strict";var e,r,i,l,u,o,s,a="0.6",c="prototype",p="hasOwnProperty",f=Object[c].toString,h=JSON.stringify,_=Object.keys,d=Object.create,g=function(t,n){return new Function(t,n)},v=function(t,n){return new RegExp(t,n||"")},y=/\n\r|\r\n|\n|\r/g,$=/'/g,m=function(){return null},b=function(t,n,e){var r=g("Fn,Cache",["return function evaluator(Var){",'    "use strict";',"    return "+t+";","};"].join("\n"))(n,e);return r},R=function(t){return t instanceof String||"[object String]"===f.call(t)},O="BLOCKS",E="OPERATORS",T="FUNCTIONS",P=!1,F=!1;s=function G(t){var n=this;return n instanceof G?(n.source=t||"",n.setup(),void G.parse(n)):new G(t)},s.VERSION=a;var S=(s.COMMA=",",s.LPAREN="(",s.RPAREN=")",s.NONE=0),x=s.DEFAULT=1,N=s.LEFT=-2,A=s.RIGHT=2,I=s.PREFIX=2,j=s.INFIX=4,D=s.POSTFIX=8,C=s.T_DUM=0,w=s.T_DFT=1,k=s.T_IDE=16,M=s.T_VAR=17,z=s.T_LIT=32,V=s.T_NUM=33,L=s.T_STR=34,X=s.T_REX=35,K=s.T_BOL=36,U=(s.T_DTM=37,s.T_ARY=38),q=s.T_OP=128,Y=s.T_N_OP=129,B=s.T_POLY_OP=130,Z=s.T_FUN=131;return s.Tpl=e=function H(t,n,e){var r=this;return r instanceof H?(r.id=null,r._renderer=null,r.tpl=H.multisplit(t||"",n||H.defaultArgs),!0===e&&(r._renderer=H.compile(r.tpl)),void r.fixRenderer()):new H(t,n,e)},e.defaultArgs={"$-5":-5,"$-4":-4,"$-3":-3,"$-2":-2,"$-1":-1,$0:0,$1:1,$2:2,$3:3,$4:4,$5:5},e.multisplit=function(t,n,e){var r,i,l,u,o,s,a,c,p,f;e=!!e,s=[[1,t]];for(r in n)if(n.hasOwnProperty(r)){for(c=[],i=e?n[r]:r,l=[0,n[r]],u=0,p=s.length;p>u;u++)if(1===s[u][0]){if(a=s[u][1].split(i),f=a.length,c.push([1,a[0]]),f>1)for(o=0;f-1>o;o++)c.push(l),c.push([1,a[o+1]])}else c.push(s[u]);s=c}return s},e.multisplit_re=function(t,n){for(var e,r=[],i=0;e=n.exec(t);)r.push([1,t.slice(i,n.lastIndex-e[0].length)]),r.push([0,e[1]?e[1]:e[0]]),i=n.lastIndex;return r.push([1,t.slice(i)]),r},e.arg=function(t,n){var e,r,i,l,u,o="args";if(arguments.length&&null!=t)for(t=t.substr?t.length?t.split("."):[]:[t],l=t.length,u=!(!n||!n.substr),e=0;l>e;e++)r=t[e],i=+r,isNaN(i)?o+='["'+r+'"]':(0>i&&(r=u?n+-i:o+".length-"+-i),o+="["+r+"]");return o},e.compile=function(t,n){var r,i,l,u,o=t.length;if(!0===n){for(u='"use strict"; return (',r=0;o>r;r++)i=t[r][0],l=t[r][1],u+=i?l:e.arg(l);u+=");"}else{for(u='"use strict"; var argslen=args.length; return (',r=0;o>r;r++)i=t[r][0],l=t[r][1],u+=i?"'"+l.replace($,"\\'").replace(y,"' + \"\\n\" + '")+"'":" + String("+e.arg(l,"argslen")+") + ";u+=");"}return g("args",u)},e[c]={constructor:e,id:null,tpl:null,_renderer:null,dispose:function(){return this.id=null,this.tpl=null,this._renderer=null,this},fixRenderer:function(){return this.render="function"==typeof this._renderer?this._renderer:this.constructor[c].render,this},render:function(t){t=t||[];var n,e,r,i=this.tpl,l=i.length,u=t.length,o="";for(n=0;l>n;n++)e=i[n][0],r=i[n][1],o+=e?r:!r.substr&&0>r?t[u+r]:t[r];return o}},s.Alias=i=function J(t){return this instanceof J?void(this.alias=t):new J(t)},i.get_entry=function(t,n){if(n&&t&&t[p](n)){for(var e=t[n];e instanceof i&&t[p](e.alias);){if(n=e.alias,e===t[n])return!1;e=t[n]}return e}return!1},s.Node=r=function Q(t,n,e,r){var i=this;return i instanceof Q?(i.type=t,i.node=n,i.children=e||null,void(i.pos=r||0)):new Q(t,n,e,r)},r[c]={constructor:r,type:null,node:null,children:null,pos:null,op_parts:null,op_def:null,op_index:null,op_next:function(t,n,e,r){var i=this,l=0===i.op_parts.indexOf(t.input);return l&&0===i.op_def[0][0]&&(u.match_args(i.op_def[0][2],n-1,e,r)?i.op_def.shift():l=!1),l&&(i.op_def.shift(),i.op_parts.shift()),l},op_complete:function(){return!this.op_parts.length},dispose:function(){var t,n,e=this,r=e.children;if(r&&(t=r.length))for(n=0;t>n;n++)r[n]&&r[n].dispose();return e.type=null,e.pos=null,e.node=null,e.op_parts=null,e.op_def=null,e.op_index=null,r=e.children=null,e},toString:function(){var t,n=[],e=this.node,r=this.children?this.children:[],i=r.length,l=arguments.length&&arguments[0].substr?arguments[0]:"",u=l+"  ";for(t=0;i>t;t++)n.push(r[t].toString(u));return l+["Node("+e.type+"): "+(e.parts?e.parts.join(" "):e.input),"Childs: [",l+n.join("\n"+l),"]"].join("\n"+l)+"\n"}},r.DFT=function(t,n,e){e=!1!==e,n=n||s.render;for(var r,i,l,u=[t],o=[];u.length;)r=u[0],r.children&&r.children.length?(u=r.children.concat(u),r.children=null):(u.shift(),i=r.node,l=n(i,i.arity?o.splice(o.length-i.arity,i.arity):[]),o.push(l),e&&r.dispose());return u=null,o[0]},s.reduce=function(t,n,e,i,l,u){var o,s,a,c,p,f,h=null,_=0;if(i)if(c=i,B===c.type&&(c=c.morph([l,t,n])),Y===c.type){if(f=c.validate(l,n,t),!f[0])return u.err=!0,u.msg=f[1],!1;a=c.node(null,l,n,t),e.unshift(a),n.unshift(a)}else{if(e.length&&(h=e[0],_=h.op_index),h&&h.op_next(c,l,n,t)){for(;n.length>_;)o=n.shift(),s=o.node,a=s.node(t.splice(t.length-s.arity,s.arity),o.pos),t.push(a);if(!h.op_complete())return;e.shift(),n.shift(),c=h.node,h.dispose(),_=e.length?e[0].op_index:0}else if(f=c.validate(l,n,t),!f[0])return u.err=!0,u.msg=f[1],!1;if(p=c.fixity,D===p)a=c.node(t.splice(t.length-c.arity,c.arity),l),t.push(a);else if(I===p)n.unshift(r(c.otype,c,null,l));else{for(;n.length>_;){if(o=n.shift(),s=o.node,!(s.priority<c.priority||s.priority===c.priority&&(s.associativity<c.associativity||s.associativity===c.associativity&&s.associativity<0))){n.unshift(o);break}a=s.node(t.splice(t.length-s.arity,s.arity),o.pos),t.push(a)}n.unshift(r(c.otype,c,null,l))}}else for(;n.length;)o=n.shift(),s=o.node,a=s.node(t.splice(t.length-s.arity,s.arity),o.pos),t.push(a)},s.parse_delimited_block=function(t,n,e,r,i){var l=r,u=!1,o="";for(i=!1!==i,n+=1;e>n&&(o=t.charAt(n++),l+=o,r!==o||u);)u=i?!u&&"\\"===o:!1;return l},s.parse=function(t){var n,e,r,l,u,o,a,c,f,h,d,g,v,y,$,m,b=s.reduce,R=i.get_entry,E=t.RE,T=t[O],P=!E[p]("t_var"),F=0,S={err:!1,msg:""};for(n=t.source,e=n.length,t._cnt=0,t._symbol_table={},t._cache={},t.variables={},f=[],h=[],d=[],g=0,o=0,F=0;e>o;)if(l=n.charAt(o),(v=R(T,l))&&(u=v.parse(n,o,e,l),!1!==u&&(o+=u.length,y=v[p]("rest")?v.rest(n,o,e)||"":"",o+=y.length,c=t.t_block(u,v.type,y),!1!==c)))g+=1,f.push(c.node(null,g));else if(r=n.slice(o),a=r.match(E.t_spc))o+=a[0].length;else if((a=r.match(E.t_num))&&(c=t.t_liter(a[1],V),!1!==c))g+=1,f.push(c.node(null,g)),o+=a[0].length;else{if(a=r.match(E.t_ident)){if(c=t.t_liter(a[1],k),!1!==c){g+=1,f.push(c.node(null,g)),o+=a[0].length;continue}if(c=t.t_op(a[1]),!1!==c){if(g+=1,b(f,h,d,c,g,S),S.err){F=1,m=S.msg;break}o+=a[0].length;continue}if(P&&(c=t.t_var(a[1]),!1!==c)){g+=1,f.push(c.node(null,g)),o+=a[0].length;continue}}if(a=r.match(E.t_special)){for(u=a[1],c=!1;u.length>0&&(c=t.t_op(u),!1===c);)u=u.slice(0,-1);if(!1!==c){if(g+=1,b(f,h,d,c,g,S),S.err){F=1,m=S.msg;break}o+=u.length;continue}}if(P||!(a=r.match(E.t_var))||(c=t.t_var(a[1]),!1===c)){if(a=r.match(E.t_nonspc)){if(c=t.t_liter(a[1],z),!1!==c){g+=1,f.push(c.node(null,g)),o+=a[0].length;continue}if(c=t.t_op(a[1]),!1!==c){if(g+=1,b(f,h,d,c,g,S),S.err){F=1,m=S.msg;break}o+=a[0].length;continue}c=t.t_tok(a[1]),g+=1,f.push(c.node(null,g)),o+=a[0].length}}else g+=1,f.push(c.node(null,g)),o+=a[0].length}if(F||(b(f,h,d),(1!==f.length||h.length>0)&&(F=1,m="Parse Error, Mismatched Parentheses or Operators")),!F)try{$=t.compile(f[0])}catch(r){F=1,m="Compilation Error, "+r.message}return d=null,h=null,f=null,t._symbol_table=null,F?($=null,t.variables=[],t._cnt=0,t._cache={},t._evaluator_str="",t._evaluator=t.dummy_evaluator,console.error("Xpresion Error: "+m+" at "+n)):(t.variables=_(t.variables),t._evaluator_str=$[0],t._evaluator=$[1]),t},s.render=function(t,n){return t.render(n)},s.defRE=function(t,n){if("object"==typeof t){n=n||s.RE;for(var e in t)t[p](e)&&(n[e]=t[e])}return n},s.defBlock=function(t,n){if("object"==typeof t){n=n||s[O];for(var e in t)t[p](e)&&(n[e]=t[e])}return n},s.defReserved=function(t,n){if("object"==typeof t){n=n||s.Reserved;for(var e in t)t[p](e)&&(n[e]=t[e])}return n},s.defOp=function(t,n){if("object"==typeof t){n=n||s[E];for(var e in t)t[p](e)&&(n[e]=t[e])}return n},s.defFunc=function(t,n){if("object"==typeof t){n=n||s[T];for(var e in t)t[p](e)&&(n[e]=t[e])}return n},s.defRuntimeFunc=function(t,n){if("object"==typeof t){n=n||s.Fn;for(var e in t)t[p](e)&&(n[e]=t[e])}return n},s.Tok=l=function W(t,n,e,r){var i=this;return i instanceof W?(i.type=t,i.input=n,i.output=e,i.value=r||null,i.priority=1e3,i.parity=0,i.arity=0,i.associativity=x,i.fixity=j,i.parenthesize=!1,void(i.revert=!1)):new W(t,n,e,r)},l.render=function(t){return t instanceof l?t.render():String(t)},l[c]={constructor:l,type:null,input:null,output:null,value:null,priority:1e3,parity:0,arity:0,associativity:x,fixity:j,parenthesize:!1,revert:!1,dispose:function(){var t=this;return t.type=null,t.input=null,t.output=null,t.value=null,t.priority=null,t.parity=null,t.arity=null,t.associativity=null,t.fixity=null,t.parenthesize=null,t.revert=null,t},setType:function(t){return this.type=t,this},setParenthesize:function(t){return this.parenthesize=!!t,this},setReverse:function(t){return this.revert=!!t,this},render:function(t){var n,r=this,i=r.output,l=r.parenthesize,u=l?s.LPAREN:"",o=l?s.RPAREN:"";return t||(t=[]),t.unshift(r.input),n=i instanceof e?i.render(t):i,u+n+o},evaluate:function(){return null},node:function(t,n){return r(this.type,this,t?t:null,n)},toString:function(){return String(this.output)}},s.Op=u=function tn(t,r,i,u,o,s,a){var c=this;if(!(c instanceof tn))return new tn(t,r,i,u,o,s,a);t=t||"",o=o||"";var p=tn.parse_definition(t);c.type=p[0],c.opdef=p[1],c.parts=p[2],!o||o instanceof e||(o=e(o)),l.call(c,c.type,c.parts[0],o),c.fixity=r||I,c.associativity=i||x,c.priority=u||1e3,c.arity=p[3],c.otype=n!==s?s:w,c.ofixity=n!==a?a:c.fixity,c.parenthesize=!1,c.revert=!1,c.morphes=null},u.Condition=function(t){return["function"==typeof t[0]?t[0]:e.compile(e.multisplit(t[0],{"${POS}":0,"${TOKS}":1,"${OPS}":2,"${TOK}":3,"${OP}":4,"${PREV_IS_OP}":5,"${DEDUCED_TYPE}":6,Xpresion:7}),!0),t[1]]},u.parse_definition=function(t){var n,e,r=[],i=[],l=0;for(t=R(t)?[1,t,1]:[].concat(t),e=0;e<t.length;e++)R(t[e])?(r.push(t[e]),i.push([1,e,t[e]])):(i.push([0,e,t[e]]),l+=t[e]);return 1===r.length&&1===i.length?(i=[[0,0,1],[1,1,r[0]],[0,2,1]],l=2,n=q):n=r.length>1?Y:q,[n,i,r,l]},u.match_args=function(t,n,e,r){for(var i,l=r.length,u=l-1,o=0,s=-10;(t>o||u>=0)&&(i=u>=0?r[u].pos:s,n===i);)o++,n--,u--;return o>=t},u[c]=d(l[c]),u[c].otype=null,u[c].ofixity=null,u[c].opdef=null,u[c].parts=null,u[c].morphes=null,u[c].dispose=function(){var t=this;return l[c].dispose.call(t),t.otype=null,t.ofixity=null,t.opdef=null,t.parts=null,t.morphes=null,t},u[c].Polymorphic=function(t){var n=this;return n.type=B,n.morphes=(t||[]).map(u.Condition),n},u[c].morph=function(t){var n,e=this.morphes,r=e.length,i=0,l=e[0][1],u=!1;for(t.length<8&&(t.push(t[1].length?t[1][t[1].length-1]:!1),t.push(t[2].length?t[2][0]:!1),t.push(t[4]?t[4].pos+1===t[0]:!1),t.push(t[4]?t[4].type:t[3]?t[3].type:0),t.push(s));r>i;){if(n=e[i++],!0===Boolean(n[0](t))){n=n[1],u=!0;break}n[1].priority>=l.priority&&(l=n[1])}for(u||(n=l);B===n.type;)n=n.morph(t);return n},u[c].render=function(t){t&&t.length||(t=["",""]);{var n,r=this,i=r.otype,u=r.output,o=r.parenthesize,a=o?s.LPAREN:"",c=o?s.RPAREN:"",p=s.COMMA,f=r.ofixity;t.length}return n=u instanceof e?a+u.render(t)+c:j===f?a+t.join(u)+c:D===f?a+t.join(p)+c+u:u+a+t.join(p)+c,l(i,n,n)},u[c].validate=function(t,n,e){var r=this,i=r.opdef,l=!0,o="";return 0===i[0][0]&&(u.match_args(i[0][2],t-1,n,e)||(l=!1,o='Operator "'+r.input+'" expecting '+i[0][2]+" prior argument(s)")),[l,o]},u[c].node=function(t,n){t=t||[];var e,i=this,l=i.otype;return i.revert&&t.reverse(),C===l&&t.length?l=t[0].type:t.length&&(t[0].type=l),e=r(l,i,t,n),Y===i.type&&arguments.length>2&&(e.op_parts=i.parts.slice(1),e.op_def=i.opdef.slice(0===i.opdef[0][0]?2:1),e.op_index=arguments[2].length+1),e},s.Func=o=function nn(t,n,e,r,i,l){var o=this;return o instanceof nn?(u.call(o,R(t)?[t,1]:t,I,i||A,r||5,n,e,l||I),void(o.type=Z)):new nn(t,n,e,r,i,l)},o[c]=d(u[c]),s[c]={constructor:s,source:null,variables:null,RE:null,Reserved:null,BLOCKS:null,OPERATORS:null,FUNCTIONS:null,Fn:null,_cnt:0,_cache:null,_symbol_table:null,_evaluator_str:null,_evaluator:null,dummy_evaluator:null,dispose:function(){var t=this;return t.RE=null,t.Reserved=null,t[O]=null,t[E]=null,t[T]=null,t.Fn=null,t.dummy_evaluator=null,t.source=null,t.variables=null,t._cnt=null,t._symbol_table=null,t._cache=null,t._evaluator_str=null,t._evaluator=null,t},setup:function(){var t=this;return t.RE=s.RE,t.Reserved=s.Reserved,t[O]=s[O],t[E]=s[E],t[T]=s[T],t.Fn=s.Fn,t.dummy_evaluator=m,t},compile:function(t){var n=r.DFT(t,s.render,!0);return[n,b(n,this.Fn,this._cache)]},evaluator:function(t){return arguments.length?(t&&t.call&&(this._evaluator=t),this):this._evaluator},evaluate:function(t){return 1>arguments.length&&(t={}),this._evaluator(t)},debug:function(t){var n=this,e=["Expression: "+n.source,"Variables : ["+n.variables.join(",")+"]","Evaluator : "+n._evaluator_str];return arguments.length&&(e.push("Data      : "+h(t,null,4)),e.push("Result    : "+h(n.evaluate(t)))),e.join("\n")},toString:function(){return"[Xpresion source]: "+this.source},t_liter:function(t,n){return V===n?l(V,t,t):i.get_entry(this.Reserved,t.toLowerCase())},t_block:function(t,n,e){if(L===n)return l(L,t,t);if(X===n){e=e||"";var r,i,u="re_"+t+e;return this._symbol_table[p](u)?r=this._symbol_table[u]:(r="re_"+ ++this._cnt,i=t.slice(1,-1),this._cache[r]=v(i,e),this._symbol_table[u]=r),l(X,t,"Cache."+r)}return!1},t_var:function(t){return this.variables[p](t)||(this.variables[t]=t),l(M,t,'Var["'+t.split(".").join('"]["')+'"]')},t_op:function(t){var n=!1;return n=i.get_entry(this[T],t),!1===n&&(n=i.get_entry(this[E],t)),n},t_tok:function(t){return l(w,t,t)}},s.init=function(t){P||(s[E]={},s[T]={},s.Fn={},s.RE={},s[O]={},s.Reserved={},s.defRuntimeFunc({INF:1/0,NAN:0/0,clamp:function(t,n,e){return n>e?t>n?n:e>t?e:t:t>e?e:n>t?n:t},len:function(t){return t?t.substr||t.push?t.length:Object===t.constructor?_(t).length:1:0},sum:function(){var t,n,e=arguments,r=0;if(e[0]&&Array===e[0].constructor&&(e=e[0]),n=e.length,n>0)for(t=0;n>t;t++)r+=e[t];return r},avg:function(){var t,n,e=arguments,r=0;if(e[0]&&Array===e[0].constructor&&(e=e[0]),n=e.length,n>0){for(t=0;n>t;t++)r+=e[t];r/=n}return r},ary_eq:function(t,n){var e,r=t.length;if(r!==n.length)return!1;for(e=0;r>e;e++)if(t[e]!=n[e])return!1;return!0},ary_merge:function(t,n){return[].concat(t,n)},match:function(t,n){return n.test(t)},contains:function(t,n){return t.substr||t.pop?-1<t.indexOf(n):t.hasOwnProperty(n)}}),P=!0,!0===t&&s.defaultConfiguration())},s.defaultConfiguration=function(){F||(s.defOp({"(":u(["(",1,")"],D,A,1,"$0",C),")":u([1,")"]),"[":u(["[",1,"]"],D,A,2,"[$0]",U),"]":u([1,"]"]),",":u([1,",",1],j,N,3,"$0,$1",w),"?":u([1,"?",1,":",1],j,A,100,"($0?$1:$2)",K),":":u([1,":",1]),"!":u(["!",1],I,A,10,"!$0",K),"~":u(["~",1],I,A,10,"~$0",V),"^":u([1,"^",1],j,A,11,"Math.pow($0,$1)",V),"*":u([1,"*",1],j,N,20,"($0*$1)",V),"/":u([1,"/",1],j,N,20,"($0/$1)",V),"%":u([1,"%",1],j,N,20,"($0%$1)",V),"+":u().Polymorphic([["${TOK} && !${PREV_IS_OP} && (${DEDUCED_TYPE}===Xpresion.T_ARY)",u([1,"+",1],j,N,25,"Fn.ary_merge($0,$1)",U)],["${TOK} && !${PREV_IS_OP} && (${DEDUCED_TYPE}===Xpresion.T_STR)",u([1,"+",1],j,N,25,"($0+String($1))",L)],["${TOK} && !${PREV_IS_OP}",u([1,"+",1],j,N,25,"($0+$1)",V)],["!${TOK} || ${PREV_IS_OP}",u(["+",1],I,A,4,"$0",V)]]),"-":u().Polymorphic([["${TOK} && !${PREV_IS_OP}",u([1,"-",1],j,N,25,"($0-$1)",V)],["!${TOK} || ${PREV_IS_OP}",u(["-",1],I,A,4,"(-$0)",V)]]),">>":u([1,">>",1],j,N,30,"($0>>$1)",V),"<<":u([1,"<<",1],j,N,30,"($0<<$1)",V),">":u([1,">",1],j,N,35,"($0>$1)",K),"<":u([1,"<",1],j,N,35,"($0<$1)",K),">=":u([1,">=",1],j,N,35,"($0>=$1)",K),"<=":u([1,"<=",1],j,N,35,"($0<=$1)",K),"==":u().Polymorphic([["${DEDUCED_TYPE}===Xpresion.T_ARY",u([1,"==",1],j,N,40,"Fn.ary_eq($0,$1)",K)],["true",u([1,"==",1],j,N,40,"($0==$1)",K)]]),"!=":u([1,"!=",1],j,N,40,"($0!=$1)",K),matches:u([1,"matches",1],j,S,40,"$0.test($1)",K),"in":u([1,"in",1],j,S,40,"Fn.contains($1,$0)",K),"&":u([1,"&",1],j,N,45,"($0&$1)",V),"|":u([1,"|",1],j,N,46,"($0|$1)",V),"&&":u([1,"&&",1],j,N,47,"($0&&$1)",K),"||":u([1,"||",1],j,N,48,"($0||$1)",K),or:i("||"),and:i("&&"),not:i("!")}),s.defFunc({min:o("min","Math.min($0)",V),max:o("max","Math.max($0)",V),pow:o("pow","Math.pow($0)",V),sqrt:o("sqrt","Math.sqrt($0)",V),len:o("len","Fn.len($0)",V),"int":o("int","parseInt($0)",V),str:o("str","String($0)",L),clamp:o("clamp","Fn.clamp($0)",V),sum:o("sum","Fn.sum($0)",V),avg:o("avg","Fn.avg($0)",V)}),s.defRE({t_spc:/^(\s+)/,t_nonspc:/^(\S+)/,t_special:/^([*.\-+\\\/\^\$\(\)\[\]|?<:>&~%!#@=_,;{}]+)/,t_num:/^(\d+(\.\d+)?)/,t_ident:/^([a-zA-Z_][a-zA-Z0-9_]*)\b/,t_var:/^\$([a-zA-Z0-9_][a-zA-Z0-9_.]*)\b/}),s.defBlock({"'":{type:L,parse:s.parse_delimited_block},'"':i("'"),"`":{type:X,parse:s.parse_delimited_block,rest:function(t,n,e){for(var r,i="",l=!1,u=!1,o=0,s=n+o,a=!0;e>s&&a;)r=t.charAt(s++),o+=1,"i"!==r||l||(i+="i",l=!0),"g"!==r||u||(i+="g",u=!0),(o>=2||!l&&!u)&&(a=!1);return i}}}),s.defReserved({"null":l(k,"null","null"),"false":l(K,"false","false"),"true":l(K,"true","true"),infinity:l(V,"Infinity","Fn.INF"),nan:l(V,"NaN","Fn.NAN"),none:i("null"),inf:i("infinity")}),F=!0)},s.init(),s});
/**
*
*   Xpresion
*   Simple eXpression parser engine with variables and custom functions support for PHP, Python, Node/JS, ActionScript
*   @version: 0.6.2
*
*   https://github.com/foo123/Xpresion
*
**/
!function(t,e,n){"use strict";var r,i="object"==typeof module&&module.exports,l="function"==typeof define&&define.amd;i?module.exports=(module.$deps=module.$deps||{})[e]=module.$deps[e]||n.call(t,{NODE:module})||1:l&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(e)?define(e,["require","exports","module"],function(e,r,i){return n.call(t,{AMD:i})}):e in t||(t[e]=r=n.call(t,{})||1)&&l&&define(e,[],function(){return r})}(this,"Xpresion",function(t,e){"use strict";var n,r,i,l,u,o,a,s,c="0.6.2",p="prototype",f="hasOwnProperty",h=Object[p].toString,d=JSON.stringify,_=Object.keys,y=Object.create,g=Math.floor,m=Math.round,v=Math.abs,$=Math.abs,T=Math.max,b=function(t,e){return new Function(t,e)},O=function(t,e){return new RegExp(t,e||"")},E=/\n\r|\r\n|\n|\r/g,R=/'/g,P=function(){return null},S=function(t,e,n){var r=b("Fn,Cache",["return function evaluator(Var){",'    "use strict";',"    return "+t+";","};"].join("\n"))(e,n);return r},D=function(t){return t instanceof String||"[object String]"===h.call(t)},F=function(t,e,n){var r=t.toString(),i=e-r.length;return i>0?new Array(i+1).join(n||" ")+r:r},M={meridian:{am:"am",pm:"pm",AM:"AM",PM:"PM"},ordinal:{ord:{1:"st",2:"nd",3:"rd"},nth:"th"},timezone:["UTC","EST","MDT"],timezone_short:["UTC","EST","MDT"],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},x=function(){return g((new Date).getTime()/1e3)},A=function(t,e){var n,r,i,l,u,o=M;u=e instanceof Date?new Date(e):"number"==typeof e?new Date(1e3*e):new Date;var a,s={},c=u.getTimezoneOffset(),p=v(c),h=u.getMonth();for(s.G=u.getHours(),s.j=u.getDate(),a=s.j%10,s.n=h+1,s.Y=u.getFullYear(),s.w=u.getDay(),s.N=s.w||7,s.d=F(s.j,2,"0"),s.D=o.day_short[s.w],s.l=o.day[s.w],s.S=o.ordinal.ord[s.j]?o.ordinal.ord[s.j]:o.ordinal.ord[a]?o.ordinal.ord[a]:o.ordinal.nth,s.z=m((new Date(s.Y,h,s.j)-new Date(s.Y,0,1))/864e5),s.W=F(1+m((new Date(s.Y,h,s.j-s.N+3)-new Date(s.Y,0,4))/864e5/7),2,"0"),s.F=o.month[h],s.m=F(s.n,2,"0"),s.M=o.month_short[h],s.t=new Date(s.Y,h+1,0).getDate(),s.L=s.Y%4===0&s.Y%100!==0|s.Y%400===0,s.o=s.Y+(11===h&&s.W<9?1:0===h&&s.W>9?-1:0),s.y=s.Y.toString().slice(-2),s.a=s.G>11?o.meridian.pm:o.meridian.am,s.A=s.G>11?o.meridian.PM:o.meridian.AM,s.B=F(g((3600*u.getUTCHours()+60*u.getUTCMinutes()+u.getUTCSeconds()+3600)/86.4)%1e3,3,"0"),s.g=s.G%12||12,s.h=F(s.g,2,"0"),s.H=F(s.G,2,"0"),s.i=F(u.getMinutes(),2,"0"),s.s=F(u.getSeconds(),2,"0"),s.u=F(1e3*u.getMilliseconds(),6,"0"),s.e="",s.I=new Date(s.Y,0)-Date.UTC(s.Y,0)!==new Date(s.Y,6)-Date.UTC(s.Y,6)?1:0,s.O=(c>0?"-":"+")+F(100*g(p/60)+p%60,4,"0"),s.P=s.O.substr(0,3)+":"+s.O.substr(3,2),s.T="UTC",s.Z=60*-c,s.U=u/1e3|0,s.c=[s.Y,"-",s.m,"-",s.d,"\\",s.T,s.H,":",s.i,":",s.s,s.P].join(""),s.r=[s.D,", ",s.d," ",s.M," ",s.Y," ",s.H,":",s.i,":",s.s," ",s.O].join(""),n="",i=0,l=t.length;l>i;i++)r=t.charAt(i),n+=s[f](r)?s[r]:r;return n},N="BLOCKS",w="OPERATORS",j="FUNCTIONS",C=!1,Y=!1;a=function ue(t){var e=this;return e instanceof ue?(e.source=t||"",e.setup(),void ue.parse(e)):new ue(t)},a.VERSION=c;var I=(a.COMMA=",",a.LPAREN="(",a.RPAREN=")",a.NONE=0),U=a.DEFAULT=1,k=a.LEFT=-2,z=a.RIGHT=2,L=a.PREFIX=2,V=a.INFIX=4,K=a.POSTFIX=8,X=a.T_DUM=0,q=a.T_DFT=1,B=a.T_IDE=16,J=a.T_VAR=17,G=a.T_LIT=32,H=a.T_NUM=33,W=a.T_STR=34,Z=a.T_REX=35,Q=a.T_BOL=36,te=(a.T_DTM=37,a.T_ARY=38),ee=a.T_OP=128,ne=a.T_N_OP=129,re=a.T_POLY_OP=130,ie=a.T_FUN=131,le=a.T_EMPTY=1024;return a.Tpl=n=function oe(t,e,n){var r=this;return r instanceof oe?(r.id=null,r._renderer=null,e=e||oe.defaultArgs,r.tpl=e instanceof RegExp?oe.multisplit_re(t||"",e):oe.multisplit(t||"",e),!0===n&&(r._renderer=oe.compile(r.tpl)),void r.fixRenderer()):new oe(t,e,n)},n.defaultArgs=/\$(-?[0-9]+)/g,n.multisplit=function(t,e,n){var r,i,l,u,o,a,s,c,p,f;n=!!n,a=[[1,t]];for(r in e)if(e.hasOwnProperty(r)){for(c=[],i=n?e[r]:r,l=[0,e[r]],u=0,p=a.length;p>u;u++)if(1===a[u][0]){if(s=a[u][1].split(i),f=s.length,c.push([1,s[0]]),f>1)for(o=0;f-1>o;o++)c.push(l),c.push([1,s[o+1]])}else c.push(a[u]);a=c}return a},n.multisplit_re=function(t,e){e=e.global?e:new RegExp(e.source,e.ignoreCase?"gi":"g");for(var n,r=[],i=0;n=e.exec(t);)r.push([1,t.slice(i,e.lastIndex-n[0].length)]),r.push([0,n[1]?n[1]:n[0]]),i=e.lastIndex;return r.push([1,t.slice(i)]),r},n.arg=function(t,e){var n,r,i,l,u,o="args";if(arguments.length&&null!=t)for(t=t.substr?t.length?t.split("."):[]:[t],l=t.length,u=!(!e||!e.substr),n=0;l>n;n++)r=t[n],i=+r,isNaN(i)?o+='["'+r+'"]':(0>i&&(r=u?e+-i:o+".length-"+-i),o+="["+r+"]");return o},n.compile=function(t,e){var r,i,l,u,o=t.length;if(!0===e){for(u='"use strict"; return (',r=0;o>r;r++)i=t[r][0],l=t[r][1],u+=i?l:n.arg(l);u+=");"}else{for(u='"use strict"; var argslen=args.length; return (',r=0;o>r;r++)i=t[r][0],l=t[r][1],u+=i?"'"+l.replace(R,"\\'").replace(E,"' + \"\\n\" + '")+"'":" + String("+n.arg(l,"argslen")+") + ";u+=");"}return b("args",u)},n[p]={constructor:n,id:null,tpl:null,_renderer:null,dispose:function(){return this.id=null,this.tpl=null,this._renderer=null,this},fixRenderer:function(){return this.render="function"==typeof this._renderer?this._renderer:this.constructor[p].render,this},render:function(t){t=t||[];var e,n,r,i=this.tpl,l=i.length,u=t.length,o="";for(e=0;l>e;e++)n=i[e][0],r=i[e][1],o+=n?r:!r.substr&&0>r?t[u+r]:t[r];return o}},a.Alias=i=function ae(t){return this instanceof ae?void(this.alias=t):new ae(t)},i.get_entry=function(t,e){if(e&&t&&t[f](e)){for(var n=t[e];n instanceof i&&t[f](n.alias);){if(e=n.alias,n===t[e])return!1;n=t[e]}return n}return!1},a.Node=r=function se(t,e,n,r,i){var l=this;return l instanceof se?(l.type=t,l.arity=e,l.node=n,l.children=r||null,void(l.pos=i||0)):new se(t,e,n,r,i)},r[p]={constructor:r,type:null,arity:null,node:null,children:null,pos:null,op_parts:null,op_def:null,op_index:null,op_next:function(t,e,n,r){var i=this,l=0,o=0===i.op_parts.indexOf(t.input);return o&&0===i.op_def[0][0]&&(l=u.match_args(i.op_def[0][2],e-1,n,r),!1===l?o=!1:(i.arity=l,i.op_def.shift())),o&&(i.op_def.shift(),i.op_parts.shift()),o},op_complete:function(){return!this.op_parts.length},dispose:function(){var t,e,n=this,r=n.children;if(r&&(t=r.length))for(e=0;t>e;e++)r[e]&&r[e].dispose();return n.type=null,n.arity=null,n.pos=null,n.node=null,n.op_parts=null,n.op_def=null,n.op_index=null,r=n.children=null,n},toString:function(){var t,e=[],n=this.node,r=this.children?this.children:[],i=r.length,l=arguments.length&&arguments[0].substr?arguments[0]:"",u=l+"  ";for(t=0;i>t;t++)e.push(r[t].toString(u));return l+["Node("+n.type+","+n.arity+"): "+(n.parts?n.parts.join(" "):n.input),"Childs: [",l+e.join("\n"+l),"]"].join("\n"+l)+"\n"}},r.DFT=function(t,e,n){n=!1!==n,e=e||a.render;for(var r,i,l,u,o=[t],s=[];o.length;)r=o[0],r.children&&r.children.length?(o=r.children.concat(o),r.children=null):(o.shift(),i=r.node,l=i.arity,ee&i.type&&0===l?l=1:l>s.length&&i.arity_min<=i.arity&&(l=i.arity_min),u=e(i,l?s.splice(s.length-l,l):[]),s.push(u),n&&r.dispose());return o=null,s[0]},a.reduce=function(t,e,n,i,l,u){var o,a,c,p,f,h,d,_=null,y=0;if(i)if(p=i,re===p.type&&(p=p.morph([l,t,e])),ne===p.type){if(h=p.validate(l,e,t),!1===h[0])return u.err=!0,u.msg=h[1],!1;c=p.node(null,l,e,t),c.arity=h[0],n.unshift(c),e.unshift(c)}else{if(n.length&&(_=n[0],y=_.op_index),_&&_.op_next(p,l,e,t)){for(;e.length>y;)o=e.shift(),a=o.node,d=a.arity,ee&a.type&&0===d?d=1:d>t.length&&a.arity_min<=a.arity&&(d=a.arity_min),c=a.node(d?t.splice(t.length-d,d):[],o.pos),t.push(c);if(!_.op_complete())return;n.shift(),e.shift(),p=_.node,_.dispose(),y=n.length?n[0].op_index:0}else if(h=p.validate(l,e,t),!1===h[0])return u.err=!0,u.msg=h[1],!1;if(f=p.fixity,K===f)(d=p.arity)>t.length&&p.arity_min<=t.length&&(d=p.arity_min),c=p.node(d?t.splice(t.length-d,d):[],l),t.push(c);else if(L===f)e.unshift(r(p.otype,p.arity,p,null,l)),ee&p.type&&0===p.arity&&t.push(s.node(null,l+1));else{for(;e.length>y;){if(o=e.shift(),a=o.node,!(a.priority<p.priority||a.priority===p.priority&&(a.associativity<p.associativity||a.associativity===p.associativity&&a.associativity<0))){e.unshift(o);break}d=a.arity,ee&a.type&&0===d?d=1:d>t.length&&a.arity_min<=a.arity&&(d=a.arity_min),c=a.node(d?t.splice(t.length-d,d):[],o.pos),t.push(c)}e.unshift(r(p.otype,p.arity,p,null,l))}}else for(;e.length;)o=e.shift(),a=o.node,d=a.arity,ee&a.type&&0===d?d=1:d>t.length&&a.arity_min<=a.arity&&(d=a.arity_min),c=a.node(d?t.splice(t.length-d,d):[],o.pos),t.push(c)},a.parse_delimited_block=function(t,e,n,r,i){var l=r,u=!1,o="";for(i=!1!==i,e+=1;n>e&&(o=t.charAt(e++),l+=o,r!==o||u);)u=i?!u&&"\\"===o:!1;return l},a.parse=function(t){var e,n,r,l,u,o,s,c,p,h,d,y,g,m,v,$,T=a.reduce,b=i.get_entry,O=t.RE,E=t[N],R=!O[f]("t_var"),P=0,S={err:!1,msg:""};for(e=t.source,n=e.length,t._cnt=0,t._symbol_table={},t._cache={},t.variables={},p=[],h=[],d=[],y=0,o=0,P=0;n>o;)if(l=e.charAt(o),(g=b(E,l))&&(u=g.parse(e,o,n,l),!1!==u&&(o+=u.length,m=g[f]("rest")?g.rest(e,o,n)||"":"",o+=m.length,c=t.t_block(u,g.type,m),!1!==c)))y+=1,p.push(c.node(null,y));else if(r=e.slice(o),s=r.match(O.t_spc))o+=s[0].length;else if((s=r.match(O.t_num))&&(c=t.t_liter(s[1],H),!1!==c))y+=1,p.push(c.node(null,y)),o+=s[0].length;else{if(s=r.match(O.t_ident)){if(c=t.t_liter(s[1],B),!1!==c){y+=1,p.push(c.node(null,y)),o+=s[0].length;continue}if(c=t.t_op(s[1]),!1!==c){if(y+=1,T(p,h,d,c,y,S),S.err){P=1,$=S.msg;break}o+=s[0].length;continue}if(R&&(c=t.t_var(s[1]),!1!==c)){y+=1,p.push(c.node(null,y)),o+=s[0].length;continue}}if(s=r.match(O.t_special)){for(u=s[1],c=!1;u.length>0&&(c=t.t_op(u),!1===c);)u=u.slice(0,-1);if(!1!==c){if(y+=1,T(p,h,d,c,y,S),S.err){P=1,$=S.msg;break}o+=u.length;continue}}if(R||!(s=r.match(O.t_var))||(c=t.t_var(s[1]),!1===c)){if(s=r.match(O.t_nonspc)){if(c=t.t_liter(s[1],G),!1!==c){y+=1,p.push(c.node(null,y)),o+=s[0].length;continue}if(c=t.t_op(s[1]),!1!==c){if(y+=1,T(p,h,d,c,y,S),S.err){P=1,$=S.msg;break}o+=s[0].length;continue}c=t.t_tok(s[1]),y+=1,p.push(c.node(null,y)),o+=s[0].length}}else y+=1,p.push(c.node(null,y)),o+=s[0].length}if(P||(T(p,h,d),(1!==p.length||h.length>0)&&(P=1,$="Parse Error, Mismatched Parentheses or Operators")),!P)try{v=t.compile(p[0])}catch(r){P=1,$="Compilation Error, "+r.message}return d=null,h=null,p=null,t._symbol_table=null,P?(v=null,t.variables=[],t._cnt=0,t._cache={},t._evaluator_str="",t._evaluator=t.dummy_evaluator,console.error("Xpresion Error: "+$+" at "+e)):(t.variables=_(t.variables),t._evaluator_str=v[0],t._evaluator=v[1]),t},a.render=function(t,e){return t.render(e)},a.defRE=function(t,e){if("object"==typeof t){e=e||a.RE;for(var n in t)t[f](n)&&(e[n]=t[n])}return e},a.defBlock=function(t,e){if("object"==typeof t){e=e||a[N];for(var n in t)t[f](n)&&(e[n]=t[n])}return e},a.defReserved=function(t,e){if("object"==typeof t){e=e||a.Reserved;for(var n in t)t[f](n)&&(e[n]=t[n])}return e},a.defOp=function(t,e){if("object"==typeof t){e=e||a[w];for(var n in t)t[f](n)&&(e[n]=t[n])}return e},a.defFunc=function(t,e){if("object"==typeof t){e=e||a[j];for(var n in t)t[f](n)&&(e[n]=t[n])}return e},a.defRuntimeFunc=function(t,e){if("object"==typeof t){e=e||a.Fn;for(var n in t)t[f](n)&&(e[n]=t[n])}return e},a.Tok=l=function ce(t,e,n,r){var i=this;return i instanceof ce?(i.type=t,i.input=e,i.output=n,i.value=r||null,i.priority=1e3,i.parity=0,i.arity=0,i.arity_min=0,i.arity_max=0,i.associativity=U,i.fixity=V,i.parenthesize=!1,void(i.revert=!1)):new ce(t,e,n,r)},l.render=function(t,e){return t instanceof l?t.render(e):String(t)},l[p]={constructor:l,type:null,input:null,output:null,value:null,priority:1e3,parity:0,arity:0,arity_min:0,arity_max:0,associativity:U,fixity:V,parenthesize:!1,revert:!1,dispose:function(){var t=this;return t.type=null,t.input=null,t.output=null,t.value=null,t.priority=null,t.parity=null,t.arity=null,t.arity_min=null,t.arity_max=null,t.associativity=null,t.fixity=null,t.parenthesize=null,t.revert=null,t},setType:function(t){return this.type=t,this},setParenthesize:function(t){return this.parenthesize=!!t,this},setReverse:function(t){return this.revert=!!t,this},render:function(t){var e,r=this,i=r.output,l=r.parenthesize,u=l?a.LPAREN:"",o=l?a.RPAREN:"";return t||(t=[]),t.unshift(r.input),e=i instanceof n?i.render(t):i,u+e+o},evaluate:function(){return null},node:function(t,e){return r(this.type,this.arity,this,t?t:null,e)},toString:function(){return String(this.output)}},s=a.EMPTY_TOKEN=l(le,"",""),a.Op=u=function pe(t,r,i,u,o,a,s){var c=this;if(!(c instanceof pe))return new pe(t,r,i,u,o,a,s);t=t||"",o=o||"";var p=pe.parse_definition(t);c.type=p[0],c.opdef=p[1],c.parts=p[2],!o||o instanceof n||(o=n(o)),l.call(c,c.type,c.parts[0],o),c.fixity=r||L,c.associativity=i||U,c.priority=u||1e3,c.arity=p[3],c.arity_min=p[4],c.arity_max=p[5],c.otype=e!==a?a:q,c.ofixity=e!==s?s:c.fixity,c.parenthesize=!1,c.revert=!1,c.morphes=null},u.Condition=function(t){return["function"==typeof t[0]?t[0]:n.compile(n.multisplit(t[0],{"${POS}":0,"${TOKS}":1,"${OPS}":2,"${TOK}":3,"${OP}":4,"${PREV_IS_OP}":5,"${DEDUCED_TYPE}":6,Xpresion:7}),!0),t[1]]},u.parse_definition=function(t){var e,n,r,i=[],l=[],u=0,o=0,a=0;for(t=D(t)?[1,t,1]:[].concat(t),r=0;r<t.length;r++)D(t[r])?(i.push(t[r]),l.push([1,r,t[r]])):(l.push([0,r,t[r]]),e=$(t[r]),u+=e,a+=e,o+=t[r]);return 1===i.length&&1===l.length?(l=[[0,0,1],[1,1,i[0]],[0,2,1]],o=a=u=2,n=ee):n=i.length>1?ne:ee,[n,l,i,u,T(0,o),a]},u.match_args=function(t,e,n,r){for(var i,l=r.length,u=l-1,o=0,a=$(t),s=-10;(a>o||u>=0)&&(i=u>=0?r[u].pos:s,e===i);)o++,e--,u--;return o>=a?a:0>=t?0:!1},u[p]=y(l[p]),u[p].otype=null,u[p].ofixity=null,u[p].opdef=null,u[p].parts=null,u[p].morphes=null,u[p].dispose=function(){var t=this;return l[p].dispose.call(t),t.otype=null,t.ofixity=null,t.opdef=null,t.parts=null,t.morphes=null,t},u[p].Polymorphic=function(t){var e=this;return e.type=re,e.morphes=(t||[]).map(u.Condition),e},u[p].morph=function(t){var e,n=this.morphes,r=n.length,i=0,l=n[0][1],u=!1;for(t.length<8&&(t.push(t[1].length?t[1][t[1].length-1]:!1),t.push(t[2].length?t[2][0]:!1),t.push(t[4]?t[4].pos+1===t[0]:!1),t.push(t[4]?t[4].type:t[3]?t[3].type:0),t.push(a));r>i;){if(e=n[i++],!0===Boolean(e[0](t))){e=e[1],u=!0;break}e[1].priority>=l.priority&&(l=e[1])}for(u||(e=l);re===e.type;)e=e.morph(t);return e},u[p].render=function(t){t&&t.length||(t=["",""]);{var e,r=this,i=r.otype,u=r.output,o=r.parenthesize,s=o?a.LPAREN:"",c=o?a.RPAREN:"",p=a.COMMA,f=r.ofixity;t.length}return e=u instanceof n?s+u.render(t)+c:V===f?s+t.join(u)+c:K===f?s+t.join(p)+c+u:u+s+t.join(p)+c,l(i,e,e)},u[p].validate=function(t,e,n){var r=this,i=r.opdef,l="",o=0;return 0===i[0][0]&&(o=u.match_args(i[0][2],t-1,e,n),!1===o&&(l='Operator "'+r.input+'" expecting '+i[0][2]+" prior argument(s)")),[o,l]},u[p].node=function(t,e){t=t||[];var n,i=this,l=i.otype;return i.revert&&t.reverse(),X===l&&t.length?l=t[0].type:t.length&&(t[0].type=l),n=new r(l,i.arity,i,t,e),ne===i.type&&arguments.length>2&&(n.op_parts=i.parts.slice(1),n.op_def=i.opdef.slice(0===i.opdef[0][0]?2:1),n.op_index=arguments[2].length+1),n},a.Func=o=function fe(t,n,r,i,l,o,a){var s=this;return s instanceof fe?(u.call(s,D(t)?[t,e!==l?l:1]:t,L,o||z,i||1,n,r,a||L),void(s.type=ie)):new fe(t,n,r,i,l,o,a)},o[p]=y(u[p]),a[p]={constructor:a,source:null,variables:null,RE:null,Reserved:null,BLOCKS:null,OPERATORS:null,FUNCTIONS:null,Fn:null,_cnt:0,_cache:null,_symbol_table:null,_evaluator_str:null,_evaluator:null,dummy_evaluator:null,dispose:function(){var t=this;return t.RE=null,t.Reserved=null,t[N]=null,t[w]=null,t[j]=null,t.Fn=null,t.dummy_evaluator=null,t.source=null,t.variables=null,t._cnt=null,t._symbol_table=null,t._cache=null,t._evaluator_str=null,t._evaluator=null,t},setup:function(){var t=this;return t.RE=a.RE,t.Reserved=a.Reserved,t[N]=a[N],t[w]=a[w],t[j]=a[j],t.Fn=a.Fn,t.dummy_evaluator=P,t},compile:function(t){var e=r.DFT(t,a.render,!0);return[e,S(e,this.Fn,this._cache)]},evaluator:function(t){return arguments.length?(t&&t.call&&(this._evaluator=t),this):this._evaluator},evaluate:function(t){return 1>arguments.length&&(t={}),this._evaluator(t)},debug:function(t){var e=this,n=["Expression: "+e.source,"Variables : ["+e.variables.join(",")+"]","Evaluator : "+e._evaluator_str];return arguments.length&&(n.push("Data      : "+d(t,null,4)),n.push("Result    : "+d(e.evaluate(t)))),n.join("\n")},toString:function(){return"[Xpresion source]: "+this.source},t_liter:function(t,e){return H===e?l(H,t,t):i.get_entry(this.Reserved,t.toLowerCase())},t_block:function(t,e,n){if(W===e)return l(W,t,t);if(Z===e){n=n||"";var r,i,u="re_"+t+n;return this._symbol_table[f](u)?r=this._symbol_table[u]:(r="re_"+ ++this._cnt,i=t.slice(1,-1),this._cache[r]=O(i,n),this._symbol_table[u]=r),l(Z,t,"Cache."+r)}return!1},t_var:function(t){return this.variables[f](t)||(this.variables[t]=t),l(J,t,'Var["'+t.split(".").join('"]["')+'"]')},t_op:function(t){var e=!1;return e=i.get_entry(this[j],t),!1===e&&(e=i.get_entry(this[w],t)),e},t_tok:function(t){return l(q,t,t)}},a.init=function(t){C||(a[w]={},a[j]={},a.Fn={},a.RE={},a[N]={},a.Reserved={},a.defRuntimeFunc({INF:1/0,NAN:0/0,clamp:function(t,e,n){return e>n?t>e?e:n>t?n:t:t>n?n:e>t?e:t},len:function(t){return t?t.substr||t.push?t.length:Object===t.constructor?_(t).length:1:0},sum:function(){var t,e,n=arguments,r=0;if(n[0]&&Array===n[0].constructor&&(n=n[0]),e=n.length,e>0)for(t=0;e>t;t++)r+=n[t];return r},avg:function(){var t,e,n=arguments,r=0;if(n[0]&&Array===n[0].constructor&&(n=n[0]),e=n.length,e>0){for(t=0;e>t;t++)r+=n[t];r/=e}return r},ary_eq:function(t,e){var n,r=t.length;if(r!==e.length)return!1;for(n=0;r>n;n++)if(t[n]!=e[n])return!1;return!0},ary_merge:function(t,e){return[].concat(t,e)},match:function(t,e){return e.test(t)},contains:function(t,e){return t.substr||t.pop?-1<t.indexOf(e):t.hasOwnProperty(e)},time:x,date:A}),C=!0,!0===t&&a.defaultConfiguration())},a.defaultConfiguration=function(){Y||(a.defOp({"(":u(["(",-1,")"],K,z,0,"$0",X),")":u([-1,")"]),"[":u(["[",1,"]"],K,z,2,"[$0]",te),"]":u([-1,"]"]),",":u([1,",",1],V,k,3,"$0,$1",q),"?":u([1,"?",1,":",1],V,z,100,"($0?$1:$2)",Q),":":u([1,":",1]),"!":u(["!",1],L,z,10,"!$0",Q),"~":u(["~",1],L,z,10,"~$0",H),"^":u([1,"^",1],V,z,11,"Math.pow($0,$1)",H),"*":u([1,"*",1],V,k,20,"($0*$1)",H),"/":u([1,"/",1],V,k,20,"($0/$1)",H),"%":u([1,"%",1],V,k,20,"($0%$1)",H),"+":u().Polymorphic([["${TOK} && !${PREV_IS_OP} && (${DEDUCED_TYPE}===Xpresion.T_ARY)",u([1,"+",1],V,k,25,"Fn.ary_merge($0,$1)",te)],["${TOK} && !${PREV_IS_OP} && (${DEDUCED_TYPE}===Xpresion.T_STR)",u([1,"+",1],V,k,25,"($0+String($1))",W)],["${TOK} && !${PREV_IS_OP}",u([1,"+",1],V,k,25,"($0+$1)",H)],["!${TOK} || ${PREV_IS_OP}",u(["+",1],L,z,4,"$0",H)]]),"-":u().Polymorphic([["${TOK} && !${PREV_IS_OP}",u([1,"-",1],V,k,25,"($0-$1)",H)],["!${TOK} || ${PREV_IS_OP}",u(["-",1],L,z,4,"(-$0)",H)]]),">>":u([1,">>",1],V,k,30,"($0>>$1)",H),"<<":u([1,"<<",1],V,k,30,"($0<<$1)",H),">":u([1,">",1],V,k,35,"($0>$1)",Q),"<":u([1,"<",1],V,k,35,"($0<$1)",Q),">=":u([1,">=",1],V,k,35,"($0>=$1)",Q),"<=":u([1,"<=",1],V,k,35,"($0<=$1)",Q),"==":u().Polymorphic([["${DEDUCED_TYPE}===Xpresion.T_ARY",u([1,"==",1],V,k,40,"Fn.ary_eq($0,$1)",Q)],["true",u([1,"==",1],V,k,40,"($0==$1)",Q)]]),"!=":u([1,"!=",1],V,k,40,"($0!=$1)",Q),is:u([1,"is",1],V,k,40,"($0===$1)",Q),matches:u([1,"matches",1],V,I,40,"$0.test($1)",Q),"in":u([1,"in",1],V,I,40,"Fn.contains($1,$0)",Q),"&":u([1,"&",1],V,k,45,"($0&$1)",H),"|":u([1,"|",1],V,k,46,"($0|$1)",H),"&&":u([1,"&&",1],V,k,47,"($0&&$1)",Q),"||":u([1,"||",1],V,k,48,"($0||$1)",Q),or:i("||"),and:i("&&"),not:i("!")}),a.defFunc({min:o("min","Math.min($0)",H),max:o("max","Math.max($0)",H),pow:o("pow","Math.pow($0)",H),sqrt:o("sqrt","Math.sqrt($0)",H),len:o("len","Fn.len($0)",H),"int":o("int","parseInt($0)",H),str:o("str","String($0)",W),clamp:o("clamp","Fn.clamp($0)",H),sum:o("sum","Fn.sum($0)",H),avg:o("avg","Fn.avg($0)",H),time:o("time","Fn.time()",H,1,0),date:o("date","Fn.date($0)",W)}),a.defRE({t_spc:/^(\s+)/,t_nonspc:/^(\S+)/,t_special:/^([*.\-+\\\/\^\$\(\)\[\]|?<:>&~%!#@=_,;{}]+)/,t_num:/^(\d+(\.\d+)?)/,t_ident:/^([a-zA-Z_][a-zA-Z0-9_]*)\b/,t_var:/^\$([a-zA-Z0-9_][a-zA-Z0-9_.]*)\b/}),a.defBlock({"'":{type:W,parse:a.parse_delimited_block},'"':i("'"),"`":{type:Z,parse:a.parse_delimited_block,rest:function(t,e,n){for(var r,i="",l=!1,u=!1,o=0,a=e+o,s=!0;n>a&&s;)r=t.charAt(a++),o+=1,"i"!==r||l||(i+="i",l=!0),"g"!==r||u||(i+="g",u=!0),(o>=2||!l&&!u)&&(s=!1);return i}}}),a.defReserved({"null":l(B,"null","null"),"false":l(Q,"false","false"),"true":l(Q,"true","true"),infinity:l(H,"Infinity","Fn.INF"),nan:l(H,"NaN","Fn.NAN"),none:i("null"),inf:i("infinity")}),Y=!0)},a.init(),a});